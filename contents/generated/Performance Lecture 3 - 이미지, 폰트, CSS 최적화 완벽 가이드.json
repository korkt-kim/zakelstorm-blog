{"readingTime":9,"title":"Performance Lecture 3 - 이미지, 폰트, CSS 최적화 완벽 가이드","description":"","category":"book","thumbnail":"/articles/images/Performance_3_1.png","createdAt":"2025-12-25T02:20:51.444Z","decription":"이미지 지연 로딩부터 폰트 최적화, 불필요한 CSS 제거까지. Lighthouse와 Coverage 패널을 활용한 성능 개선 전략과 IntersectionObserver를 이용한 실제 구현 코드를 담았습니다. 캐시 전략까지 배우는 완벽한 성능 최적화 가이드입니다.","fileName":"Performance Lecture 3 - 이미지, 폰트, CSS 최적화 완벽 가이드","githubPath":"apps/zakelstorm-blog/contents/book/Performance Lecture 3 - 이미지, 폰트, CSS 최적화 완벽 가이드.md","content":"<h1 id=\"performance-lecture-3---이미지-폰트-css-최적화-완벽-가이드\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#performance-lecture-3---이미지-폰트-css-최적화-완벽-가이드\"><span class=\"icon icon-link\"></span></a>Performance Lecture 3 - 이미지, 폰트, CSS 최적화 완벽 가이드</h1>\n<h2 id=\"개요\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#개요\"><span class=\"icon icon-link\"></span></a>개요</h2>\n<h2 id=\"최적화-기법\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#최적화-기법\"><span class=\"icon icon-link\"></span></a>최적화 기법</h2>\n<ul>\n<li><strong>이미지 지연 로딩</strong>: 첫화면에 당장 필요하지 않은 이미지가 로드 되지않도록 지연</li>\n<li><strong>이미지 사이즈 최적화</strong>: 이전에는 CDN에서 로드된 이미지의 크기를 수정했지만 이번에는 정적 이미지를 최적화</li>\n<li><strong>폰트 최적화</strong>: 커스텀 폰트 최적화</li>\n<li><strong>캐시 최적화</strong>: 불필요한 CSS 제거</li>\n<li><strong>불필요한 CSS 제거</strong>: 불필요한 CSS 코드를 제거하여 파일사이즈 줄이기</li>\n</ul>\n<h2 id=\"최적화-툴\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#최적화-툴\"><span class=\"icon icon-link\"></span></a>최적화 툴</h2>\n<ul>\n<li><strong>크롬 개발자 도구</strong>\n<ul>\n<li>Coverage 패널: 웹페이지를 렌더링하는 과정에서 어떤 코드가 실행되었는지, 얼마나 실행되었는지(비율) 확인.</li>\n</ul>\n</li>\n<li><strong>Squoosh</strong>: 이미지 압축 도구</li>\n<li><strong>PurgeCSS</strong>: 사용하지 않는 CSS 제거</li>\n</ul>\n<h2 id=\"최적화\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#최적화\"><span class=\"icon icon-link\"></span></a>최적화</h2>\n<h3 id=\"이미지-지연로딩\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#이미지-지연로딩\"><span class=\"icon icon-link\"></span></a>이미지 지연로딩</h3>\n<p>이미지 영역이 화면에 보이는 순간 또는 그 직전에 이미지를 로드.</p>\n<h4 id=\"scroll-event-감지-방식\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#scroll-event-감지-방식\"><span class=\"icon icon-link\"></span></a>Scroll Event 감지 방식</h4>\n<p>scroll이 이동할때마다 콜백함수가 실행되기 때문에 내부에 무거운 로직이 들어가면 브라우저 메인스레드에 부담이감.</p>\n<h4 id=\"intersectionobserver-방식\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#intersectionobserver-방식\"><span class=\"icon icon-link\"></span></a>IntersectionObserver 방식</h4>\n<p>스크롤 할때마다 콜백함수가 실행되는 것이 아님.</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">function</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> Card</span><span style=\"color:#999999;--shiki-dark:#666666\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">props</span><span style=\"color:#999999;--shiki-dark:#666666\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">  const</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> img</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> useRef</span><span style=\"color:#999999;--shiki-dark:#666666\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">null</span><span style=\"color:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  useEffect</span><span style=\"color:#999999;--shiki-dark:#666666\">(()</span><span style=\"color:#999999;--shiki-dark:#666666\"> =></span><span style=\"color:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    const</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> intersectionObserver</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> new</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> IntersectionObserver</span><span style=\"color:#999999;--shiki-dark:#666666\">(</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">      e</span><span style=\"color:#999999;--shiki-dark:#666666\"> =></span><span style=\"color:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">        if</span><span style=\"color:#999999;--shiki-dark:#666666\"> (</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">e</span><span style=\"color:#999999;--shiki-dark:#666666\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0</span><span style=\"color:#999999;--shiki-dark:#666666\">].</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">isIntersecting</span><span style=\"color:#999999;--shiki-dark:#666666\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">          console</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">log</span><span style=\"color:#999999;--shiki-dark:#666666\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">e</span><span style=\"color:#999999;--shiki-dark:#666666\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0</span><span style=\"color:#999999;--shiki-dark:#666666\">].</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">target</span><span style=\"color:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">          const</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> imgComponent</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> img</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">current</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">querySelector</span><span style=\"color:#999999;--shiki-dark:#666666\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">img</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">          imgComponent</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">src</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> imgComponent</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">dataset</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">src</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">          intersectionObserver</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">unobserve</span><span style=\"color:#999999;--shiki-dark:#666666\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">e</span><span style=\"color:#999999;--shiki-dark:#666666\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0</span><span style=\"color:#999999;--shiki-dark:#666666\">].</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">target</span><span style=\"color:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">      },</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">      {</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        root</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> document</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        rootMargin</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">0px</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        threshold</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">      }</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    )</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    intersectionObserver</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">observe</span><span style=\"color:#999999;--shiki-dark:#666666\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">img</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">current</span><span style=\"color:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    return</span><span style=\"color:#999999;--shiki-dark:#666666\"> ()</span><span style=\"color:#999999;--shiki-dark:#666666\"> =></span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> intersectionObserver</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">disconnect</span><span style=\"color:#999999;--shiki-dark:#666666\">()</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">  },</span><span style=\"color:#999999;--shiki-dark:#666666\"> [])</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">  return</span><span style=\"color:#999999;--shiki-dark:#666666\"> (</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    &#x3C;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">div</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> ref</span><span style=\"color:#999999;--shiki-dark:#666666\">={</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">img</span><span style=\"color:#999999;--shiki-dark:#666666\">}</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> className</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Card text-center</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">      &#x3C;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">img</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> data-src</span><span style=\"color:#999999;--shiki-dark:#666666\">={</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">props</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">image</span><span style=\"color:#999999;--shiki-dark:#666666\">}</span><span style=\"color:#999999;--shiki-dark:#666666\"> /></span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">      &#x3C;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">div</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> className</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">p-5 font-semibold text-gray-700 text-xl md:text-lg lg:text-xl keep-all</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        {</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">props</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">children</span><span style=\"color:#999999;--shiki-dark:#666666\">}</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">      &#x3C;/</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">div</span><span style=\"color:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    &#x3C;/</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">div</span><span style=\"color:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">  )</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<p>※ img 컴포넌트에 대한 display:none->display:block 의 변경으로 위 문제를 해결 할 수 없다. 무조건 src를 넣는 시점을 제어해야한다.</p>\n<p>Card 내 이미지의 크기가 커 로딩속도가 너무 느리다.</p>\n<p><strong>사이즈</strong>: PNG > JPG > WebP<br>\n<strong>화질</strong>: PNG = WebP > JPG<br>\n<strong>호환성</strong>: PNG = JPG > WebP</p>\n<p>JPG/PNG 포맷의 이미지를 WebP 포맷으로 변환하여 고화질, 저용량 이미지로 최적화.</p>\n<p>WebP를 지원하지 못하는 브라우저의 경우 JPG/PNG로 로드하게 해줘야한다. 이를 대비하기 위해 <code>&#x3C;picture></code> 를 이용한다.</p>\n<p>(<a href=\"https://www.w3schools.com/tags/tryit.asp?filename=tryhtml5_picture\">https://www.w3schools.com/tags/tryit.asp?filename=tryhtml5_picture</a>)</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"># 뷰포트 크기에 따라 구분</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">picture</span><span style=\"color:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">  &#x3C;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">source</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> media</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">(min-width:650px)</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> srcset</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">img_pink_flowers.jpg</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\"> /></span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">  &#x3C;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">source</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> media</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">(min-width:450px)</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> srcset</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">img_white_flowers.jpg</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\"> /></span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">  &#x3C;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">img</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> src</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">img_orange_flowers.jpg</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> alt</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Flowers</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> style</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">width:auto;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\"> /></span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">picture</span><span style=\"color:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"># 이미지 포맷에 따라 구분</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">picture</span><span style=\"color:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">  &#x3C;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">source</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> type</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">image/avif</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> srcset</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">img_pink_flowers.avif</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\"> /></span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">  &#x3C;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">source</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> type</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">image/webp</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> srcset</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">img_pink_flowers.webp</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\"> /></span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">  &#x3C;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">img</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> src</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">img_pink_flowers.jpg</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> alt</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Flowers</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> style</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">width:auto;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\"> /></span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">picture</span><span style=\"color:#999999;--shiki-dark:#666666\">></span></span></code></pre>\n<h3 id=\"동영상-최적화\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#동영상-최적화\"><span class=\"icon icon-link\"></span></a>동영상 최적화</h3>\n<p>동영상 압축 웹 사이트에서 동영상 너비, 높이, Bitrate, Audio 유무 등을 조정하여 메모리 최적화.</p>\n<p>단, 화질이 저화 되므로 영상이 중요하지 않다면 이를 보완하기위해 CSS 상으로 blur등의 필터를 씌운다</p>\n<h3 id=\"폰트-최적화\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#폰트-최적화\"><span class=\"icon icon-link\"></span></a>폰트 최적화</h3>\n<p>페이지 로드 후 폰트가 적용되어 텍스트 스타일이 변하는 모습이 관측된다.</p>\n<p><img src=\"/articles/images/Performance_3_1.png\" alt=\"alt text\"></p>\n<p>브라우저에 따라 FOUT(텍스트 출력 후 폰트스타일 적용)/FOIT(폰트스타일 준비 완료 후 텍스트 출력) 방식이 다르다</p>\n<h4 id=\"폰트-적용-시점-제어\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#폰트-적용-시점-제어\"><span class=\"icon icon-link\"></span></a>폰트 적용 시점 제어</h4>\n<p><code>@font-face</code>를 통해 font를 등록할때 font-display에 폰트 표현방식 설정</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">@</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">font-face</span><span style=\"color:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  font-family</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> BMYEONGSUNG</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  src</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> url</span><span style=\"color:#999999;--shiki-dark:#666666\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">./assets/fonts/BMYEONGSUNG.ttf</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  font-display</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> fallback</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<p><strong>auto</strong>: 브라우저 기본 동작<br>\n<strong>block</strong>: FOIT (timeout=3s)<br>\n<strong>swap</strong>: FOUT<br>\n<strong>fallback</strong>: FOIT (timeout=0.1s) // 3초 후에도 불러오지 못한경우 기본 폰트로 유지<br>\n<strong>optional</strong>: FOIT // 네트워크 상태에 따라 기본 폰트로 유지할지 결정</p>\n<p>※ block방식을 선택할 경우 3초후 갑자기 텍스트가 나타날 수 있으니 fade-in 애니메이션을 함께 넣어주면 좋다</p>\n<h4 id=\"폰트-사이즈-감소\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#폰트-사이즈-감소\"><span class=\"icon icon-link\"></span></a>폰트 사이즈 감소</h4>\n<p><strong>압축률</strong>: EOT &#x3C; TTF/OTF &#x3C; WOFF &#x3C; WOFF2</p>\n<p>Transfonter라는 서비스에서 확장자 변환.</p>\n<p>우선순위에 순서로 src 설정</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">@</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">font-face</span><span style=\"color:#999999;--shiki-dark:#666666\">{</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  font-family</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> BMYEONGSUNG</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  src</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> url</span><span style=\"color:#999999;--shiki-dark:#666666\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">./assets/fonts/BMYEONGSUNG.woff2</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">)</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> format</span><span style=\"color:#999999;--shiki-dark:#666666\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">woff2</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">),</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">       url</span><span style=\"color:#999999;--shiki-dark:#666666\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">./assets/fonts/BMYEONGSUNG.woff</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">)</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> format</span><span style=\"color:#999999;--shiki-dark:#666666\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">woff</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">),</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">       url</span><span style=\"color:#999999;--shiki-dark:#666666\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">./assets/fonts/BMYEONGSUNG.ttf</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">)</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> format</span><span style=\"color:#999999;--shiki-dark:#666666\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">ttf</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">),</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">  font-display: </span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">fallback</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<h4 id=\"서브셋-폰트-사용\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#서브셋-폰트-사용\"><span class=\"icon icon-link\"></span></a>서브셋 폰트 사용</h4>\n<p>특정 영역에서 특정 문자의 폰트 정보만 가지고 있으면 된다. 이를 서브셋 폰트라고 한다.</p>\n<p>Transfonter 서비스에서 원하는 문자를 넣고 폰트를 생성하면 서브셋 폰트를 생성할 수 있다.</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">@</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">font-face</span><span style=\"color:#999999;--shiki-dark:#666666\">{</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  font-family</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> BMYEONGSUNG</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  src</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> url</span><span style=\"color:#999999;--shiki-dark:#666666\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">./assets/fonts/subset-BMYEONGSUNG.woff2</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">)</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> format</span><span style=\"color:#999999;--shiki-dark:#666666\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">woff2</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">),</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">       url</span><span style=\"color:#999999;--shiki-dark:#666666\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">./assets/fonts/subset-BMYEONGSUNG.woff</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">)</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> format</span><span style=\"color:#999999;--shiki-dark:#666666\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">woff</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">),</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">       url</span><span style=\"color:#999999;--shiki-dark:#666666\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">./assets/fonts/subset-BMYEONGSUNG.ttf</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">)</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> format</span><span style=\"color:#999999;--shiki-dark:#666666\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">ttf</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">),</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">  font-display: </span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">fallback</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<h4 id=\"data-uri\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#data-uri\"><span class=\"icon icon-link\"></span></a>Data-URI</h4>\n<p>transfonter 서비스에서 Base64로 encoding에서 이 결과물을 src에 넣으면 폰트 로드시간을 획기적으로 줄일 수 있다.</p>\n<h3 id=\"캐시-최적화\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#캐시-최적화\"><span class=\"icon icon-link\"></span></a>캐시 최적화</h3>\n<p>Lighthouse Diagnostics를 보면 다음과 같은 진단이 있다.</p>\n<p><img src=\"/articles/images/Performance_3_2.png\" alt=\"alt text\"></p>\n<p>실제로 저중에 하나의 결과를 보면 Response Header에 Cache-Control헤더가 없다.</p>\n<p><img src=\"/articles/images/Performance_3_3.png\" alt=\"alt text\"></p>\n<h4 id=\"웹-캐시-종류\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#웹-캐시-종류\"><span class=\"icon icon-link\"></span></a>웹 캐시 종류</h4>\n<ul>\n<li><strong>메모리 캐시</strong>: RAM에 저장하는 방식</li>\n<li><strong>디스크 캐시</strong>: 파일 형태로 디스크에 저장하는 방식</li>\n</ul>\n<h4 id=\"캐시-최적화-1\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#캐시-최적화-1\"><span class=\"icon icon-link\"></span></a>캐시 최적화</h4>\n<p>Lighthouse Diagnostics 섹션에서 Serve static assets with an efficient cache policy항목을 펼쳐 캐시가 적용되지 않은 파일을 확인. 해당 파일들은 실제로 응답 헤더에 cache-control 속성이 없다.</p>\n<p><img src=\"/articles/images/Performance_3_3.png\" alt=\"alt text\"></p>\n<ul>\n<li><strong>memory cache</strong>: RAM에 저장하는 방식. 브라우저를 끄지않고 페이지 이동, 새로고침 했을때 많이 나타남.</li>\n<li><strong>disk cache</strong>: 파일 형태로 디스크에 저장하는 방식. 브라우저를 껐다 켰을때 나타남.</li>\n</ul>\n<p>어떤 캐시를 사용할지는 브라우저가 특정 알고리즘에 의해 알아서 처리. (사용자 제어 불가)</p>\n<h4 id=\"cache-control\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#cache-control\"><span class=\"icon icon-link\"></span></a>Cache-Control</h4>\n<p>FE 서버에서 설정해줘야한다!</p>\n<p><strong>cache 전략</strong></p>\n<ul>\n<li><strong>no-cache</strong>: 캐시 써도 되는데, 매번 서버에 확인. revalidation에서 304 응답받으면 cache 사용.</li>\n<li><strong>no-store</strong>: 캐시 사용 금지. 매번 새로 받아올것</li>\n<li><strong>public</strong>: CDN, 프록시 서버에서도 캐시 가능</li>\n<li><strong>private</strong>: 사용자 브라우저에만 캐시 허용</li>\n</ul>\n<p><strong>적절한 캐시 유효시간</strong></p>\n<ul>\n<li><strong>HTML</strong>: no-cache. 항상 최신버전의 웹 서비스를 제공하기 위함.</li>\n<li><strong>JS, CSS, Font</strong>: public, max-age=31536000. 해시값을 가지고 있어 파일이 변경되면 자동으로 캐시가 풀림</li>\n<li><strong>default</strong>: no-store</li>\n</ul>\n<h3 id=\"불필요한-css-제거\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#불필요한-css-제거\"><span class=\"icon icon-link\"></span></a>불필요한 CSS 제거</h3>\n<p>Lighthouse를 통해 상황을 파악하고 Coverage 패널을 통해 얼마나 불필요한 코드가 들어있는지 상세하게 알 수 있음.</p>\n<p><img src=\"/articles/images/Performance_3_5.png\" alt=\"alt text\"></p>\n<p><img src=\"/articles/images/Performance_3_6.png\" alt=\"alt text\"></p>\n<p><img src=\"/articles/images/Performance_3_7.png\" alt=\"alt text\"></p>\n<p>하지만 위의 경우 모두 tailwind css라이브러리에서 추가한 것이다.</p>\n<p>이를 해결하기위해 purgeCSS를 사용한다. (하지만 요즘 tailwind는 이런 문제를 자체적으로 해결해준다. v4 기준) 텍스트를 추출하여 사용여부를 판단하는 원리로 작동한다.</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">npm</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -D</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> purgecss</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">npx</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> purgecss</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --css</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ./build/static/css/</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">*</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">.css</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --output</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ./build/static/css/</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --content</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ./build/index.html</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ./build/static/js/</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">*</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">.js</span></span></code></pre>"}